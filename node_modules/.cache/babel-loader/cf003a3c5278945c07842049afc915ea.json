{"ast":null,"code":"var _jsxFileName = \"/Users/lenaduong/Desktop/MERN Project/frontend/src/components/Container.js\",\n    _s = $RefreshSig$();\n\nimport update from 'immutability-helper';\nimport React, { useRef, useCallback, useEffect, useState } from 'react';\nimport { Card } from './Card.js';\nimport \"./Favorites.css\";\nimport FavoritesListDataService from '../services/favoriteslist';\nimport FavoritesDataService from '../services/favorites';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Container = _ref => {\n  _s();\n\n  let {\n    user,\n    setUser,\n    favorites,\n    setFavorites\n  } = _ref;\n  const [cards, setCards] = useState([]);\n  const firstUpdate = useRef(true);\n  const retrieveFavoriteMovies = useCallback(() => {\n    console.log(favorites);\n    FavoritesListDataService.getFavoriteMovies(user.googleId).then(res => {\n      setCards(res.data);\n\n      if (firstUpdate.current) {\n        firstUpdate.current = false;\n      }\n\n      console.log(firstUpdate.current);\n      console.log(user);\n    }).catch(e => {\n      console.log(e);\n    });\n  }, [user]);\n  const moveCard = useCallback((dragIndex, hoverIndex) => {\n    setCards(prevCards => update(prevCards, {\n      $splice: [[dragIndex, 1], [hoverIndex, 0, prevCards[dragIndex]]]\n    }));\n    console.log(favorites);\n    let temp = favorites.splice(dragIndex, 1)[0];\n    favorites.splice(hoverIndex, 0, temp);\n    updateFavoritesSort();\n  }, []);\n  const updateFavoritesSort = useCallback(() => {\n    var data = {\n      _id: user.googleId,\n      favorites: favorites\n    };\n    FavoritesDataService.updateFavorites(data).then(res => {\n      console.log(res.data);\n      console.log('successfully updated');\n    }).catch(e => {\n      console.log(e);\n    });\n  }, []);\n  useEffect(() => {\n    setUser(JSON.parse(window.sessionStorage.getItem(\"user\")));\n    setFavorites(JSON.parse(window.sessionStorage.getItem(\"favorites\")));\n  }, []);\n  useEffect(() => {\n    if (user) {\n      updateFavoritesSort();\n    }\n  }, [favorites]);\n  useEffect(() => {\n    retrieveFavoriteMovies();\n  }, []);\n  const renderCard = useCallback((card, index) => {\n    return /*#__PURE__*/_jsxDEV(Card, {\n      index: index,\n      id: card.id,\n      text: card.text,\n      poster: card.poster,\n      moveCard: moveCard\n    }, card.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"favoritesPanel\",\n      children: cards.map((card, i) => renderCard(card, i))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(Container, \"JGEzLCxUHP+brHbZ6WDqXQhW2jM=\");\n\n_c = Container;\n\nvar _c;\n\n$RefreshReg$(_c, \"Container\");","map":{"version":3,"names":["update","React","useRef","useCallback","useEffect","useState","Card","FavoritesListDataService","FavoritesDataService","Container","user","setUser","favorites","setFavorites","cards","setCards","firstUpdate","retrieveFavoriteMovies","console","log","getFavoriteMovies","googleId","then","res","data","current","catch","e","moveCard","dragIndex","hoverIndex","prevCards","$splice","temp","splice","updateFavoritesSort","_id","updateFavorites","JSON","parse","window","sessionStorage","getItem","renderCard","card","index","id","text","poster","map","i"],"sources":["/Users/lenaduong/Desktop/MERN Project/frontend/src/components/Container.js"],"sourcesContent":["import update from 'immutability-helper'\nimport React, { useRef, useCallback, useEffect, useState } from 'react'\nimport { Card } from './Card.js'\nimport \"./Favorites.css\";\nimport FavoritesListDataService from '../services/favoriteslist'\nimport FavoritesDataService from '../services/favorites'\n\nexport const Container = ({ user, setUser, favorites, setFavorites }) => {\n\n    const [cards, setCards] = useState([])\n    const firstUpdate = useRef(true);\n\n    const retrieveFavoriteMovies = useCallback(() => {\n      console.log(favorites)\n      FavoritesListDataService.getFavoriteMovies(user.googleId)\n        .then(res => {\n          setCards(res.data);\n          if (firstUpdate.current) {\n            firstUpdate.current = false;\n          }\n          console.log(firstUpdate.current)\n          console.log(user)\n        })\n        .catch(e => {\n          console.log(e);\n        })\n    }, [user]);\n\n    const moveCard = useCallback((dragIndex, hoverIndex) => {\n      setCards((prevCards) =>\n        update(prevCards, {\n          $splice: [\n            [dragIndex, 1],\n            [hoverIndex, 0, prevCards[dragIndex]],\n          ],\n        }),\n      )\n      console.log(favorites)\n      let temp = favorites.splice(dragIndex, 1)[0]\n      favorites.splice(hoverIndex, 0, temp)\n      updateFavoritesSort();\n    }, [])\n\n    const updateFavoritesSort = useCallback(() => {\n      var data = {\n        _id: user.googleId,\n        favorites: favorites\n      }\n      FavoritesDataService.updateFavorites(data)\n        .then(res => {\n          console.log(res.data);\n          console.log('successfully updated')\n        })\n        .catch(e => {\n          console.log(e);\n        })\n    }, [])\n\n    useEffect(() => {\n      setUser(JSON.parse(window.sessionStorage.getItem(\"user\")));\n      setFavorites(JSON.parse(window.sessionStorage.getItem(\"favorites\")));\n    }, []);\n\n    useEffect(() => {\n      if (user) {\n        updateFavoritesSort();\n      }\n    }, [favorites])\n\n    useEffect(() => {\n      retrieveFavoriteMovies();\n    }, []);\n\n    const renderCard = useCallback((card, index) => {\n      return (\n        <Card\n          key={card.id}\n          index={index}\n          id={card.id}\n          text={card.text}\n          poster={card.poster}\n          moveCard={moveCard}\n        />\n      )\n    }, [])\n    return (\n      <>\n        <div className=\"favoritesPanel\">{cards.map((card, i) => renderCard(card, i))}</div>\n      </>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}